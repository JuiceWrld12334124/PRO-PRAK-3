/*!
 * Pushin.js - v3.4.0
 * Author: Nathan Blair <nate@natehub.net> (https://natehub.net)
 * License: MIT
 */!function(){var e={39:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layers=[],this.container=t,n&&(this.debug=n.debug||!1)}var t,i,s;return t=e,(i=[{key:"start",value:function(){this.container?(this.addScene(),this.speedDelta=100,this.transitionLength=200,this.layerDepth=1e3,this.scrollPos=window.pageYOffset,this.setBreakpoints(),this.getLayers(),this.setScrollLength(),this.bindEvents(),this.toggleLayers()):console.error("No container element provided to pushIn.js. Effect will not be applied."),this.debug&&this.showDebugger()}},{key:"addScene",value:function(){this.scene=this.container.querySelector(".pushin-scene"),this.scene||(this.scene=document.createElement("div"),this.scene.classList.add("pushin-scene"),this.scene.innerHTML=this.container.innerHTML,this.container.innerHTML="",this.container.appendChild(this.scene))}},{key:"setBreakpoints",value:function(){this.breakpoints=[768,1440,1920],this.scene.dataset.pushinBreakpoints&&(this.breakpoints=this.scene.dataset.pushinBreakpoints.split(","),this.breakpoints=this.breakpoints.map((function(e){return parseInt(e.trim())}))),this.breakpoints.unshift(0)}},{key:"getLayers",value:function(){var e=this.container.getElementsByClassName("pushin-layer");if(e)for(var t=0;t<e.length;t++){var n=e[t],i=this.getInpoints(n,t),s=this.getOutpoints(n,i[0],t),a={elem:n,index:t,originalScale:this.getElementScaleX(n),ref:{inpoints:i,outpoints:s},params:{inpoint:this.getInpoint(i),outpoint:this.getOutpoint(s),speed:this.getSpeed(n)}};this.layers.push(a),this.setZIndex(a,e.length)}}},{key:"getInpoints",value:function(e,t){var n=[this.scene.getBoundingClientRect().top];return e.dataset.hasOwnProperty("pushinFrom")?n=(n=e.dataset.pushinFrom.split(",")).map((function(e){return parseInt(e.trim())})):0===t&&this.scene.dataset.hasOwnProperty("pushinFrom")?(sceneInpoints=this.scene.dataset.pushinFrom.split(","),sceneInpoints=sceneInpoints.map((function(e){return parseInt(e.trim())}))):t>0&&(n=[this.layers[t-1].params.outpoint-this.speedDelta]),n}},{key:"getOutpoints",value:function(e,t,n){var i=[t+this.layerDepth];return e.dataset.hasOwnProperty("pushinTo")&&(i=e.dataset.pushinTo.split(",").map((function(e){return parseInt(e.trim())}))),i}},{key:"getSpeed",value:function(e){return(e.dataset.hasOwnProperty("pushinSpeed")?e.dataset.pushinSpeed:null)||8}},{key:"getBreakpointIndex",value:function(){var e=this.breakpoints.reverse().findIndex((function(e){return e<=window.innerWidth}));return-1===e?0:this.breakpoints.length-1-e}},{key:"setZIndex",value:function(e,t){e.elem.style.zIndex=t-e.index}},{key:"bindEvents",value:function(){var e,t=this;window.addEventListener("scroll",(function(e){t.scrollPos=window.pageYOffset,t.dolly()})),window.addEventListener("touchstart",(function(e){t.touchStart=e.changedTouches[0].screenY})),window.addEventListener("touchmove",(function(e){e.preventDefault();var n=e.changedTouches[0].screenY;t.scrollPos=Math.max(t.scrollEnd+t.touchStart-n,0),t.scrollPos=Math.min(t.scrollPos,t.pageHeight-window.innerHeight),dolly()})),window.addEventListener("touchend",(function(e){t.scrollEnd=t.scrollPos})),window.addEventListener("resize",(function(n){clearTimeout(e),e=setTimeout((function(){t.resetLayerParams(),t.setScrollLength(),t.toggleLayers()}),300)}))}},{key:"resetLayerParams",value:function(){var e=this;this.layers.forEach((function(t){t.params={inpoint:e.getInpoint(t.ref.inpoints),outpoint:e.getOutpoint(t.ref.outpoints),speed:e.getSpeed(t.elem)}}))}},{key:"getElementScaleX",value:function(e){var t=window.getComputedStyle(e).getPropertyValue("transform"),n=1;if(t&&"none"!==t){var i=t.match(/[matrix|scale]\(([\d,\.\s]+)/);if(i&&i[1]){var s=i[1].split(", ");n=parseFloat(s[0])}}return n}},{key:"dolly",value:function(){var e=this;requestAnimationFrame((function(){e.toggleLayers()}))}},{key:"toggleLayers",value:function(){var e=this;this.layers.forEach((function(t){return e.setLayerStyle(t)}))}},{key:"isActive",value:function(e){var t=e.params.inpoint,n=e.params.outpoint;return this.scrollPos>=t&&this.scrollPos<=n}},{key:"getInpoint",value:function(e){return e[this.getBreakpointIndex()]||e[0]}},{key:"getOutpoint",value:function(e){return e[this.getBreakpointIndex()]||e[0]}},{key:"getScaleValue",value:function(e){var t=(this.scrollPos-e.params.inpoint)*(Math.min(e.params.speed,100)/100)/100;return Math.max(e.originalScale+t,0)}},{key:"setScale",value:function(e,t){var n="scale(".concat(t,")");e.style.webkitTransform=n,e.style.mozTransform=n,e.style.msTransform=n,e.style.oTransform=n,e.style.transform=n}},{key:"setLayerStyle",value:function(e){var t=0,n=0===e.index,i=e.index+1===this.layers.length,s=e.params.inpoint,a=e.params.outpoint;if(n&&this.scrollPos<s)t=1;else if(i&&this.scrollPos>a)t=1;else if(this.isActive(e)){this.setScale(e.elem,this.getScaleValue(e));var r=Math.max(Math.min(this.scrollPos-s,this.transitionLength),0)/this.transitionLength;n&&(r=1);var o=Math.max(Math.min(a-this.scrollPos,this.transitionLength),0)/this.transitionLength;i&&(o=1),t=Math.min(r,o)}e.elem.style.opacity=t}},{key:"setScrollLength",value:function(){var e=getComputedStyle(this.container).height.replace("px",""),t=(this.layers.length-1)*this.speedDelta,n=this.layers.length*(this.layerDepth+this.transitionLength);this.container.style.height="".concat(Math.max(e,n-t),"px")}},{key:"showDebugger",value:function(){var e=document.createElement("div");e.classList.add("pushin-debug");var t=document.createElement("p");t.innerText="Pushin.js Debugger",t.classList.add("pushin-debug__title");var n=document.createElement("div");n.classList.add("pushin-debug__content"),n.innerText="Scroll position: ".concat(window.pageYOffset,"px"),e.appendChild(t),e.appendChild(n),document.body.appendChild(e),window.addEventListener("scroll",(function(e){n.innerText="Scroll position: ".concat(Math.round(window.pageYOffset),"px")}))}}])&&n(t.prototype,i),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.e=i}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}!function(){"use strict";var e=n(39);window.pushInStart=function(t){var n=".pushin";t&&"string"==typeof t&&(n=t,t=null);for(var i=document.querySelectorAll(n),s=0;s<i.length;s++)new e.e(i[s],t).start()}}()}();